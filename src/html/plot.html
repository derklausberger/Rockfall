{% extends 'base.html' %}

{% block title %}
    Chart
{% endblock %}


{% block content %}
   <div class="row">
      <div class="col-md-4"><!-- form/results will go here --></div>
      <div class="col-md-8">
         <canvas id="chart" width="1000" height="1000"></canvas>
      </div>
   </div>
{% endblock %}

{% block scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/date-fns/1.30.1/date_fns.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>


   <script>
    console.log("hallo")
      var chart = new Chart(document.getElementById('chart').getContext("2d"), {
         type: 'line',
         data: {
            labels: [
               {% for item in dt %}
                  "{{ item }}",
               {% endfor %}
            ],
            datasets: [
               {
                  label: 'CrackmeterDistance',
                  data: [
                     {% for item in cdy %}
                        {{ item if item is not none }},
                     {% endfor %}
                  ],
                  backgroundColor: '#90ee90',
                  borderColor: ['green'],
                  borderWidth: 1,
                  spanGaps: true,
                  yAxisID: 'cdY'
               },
               {
                  label: 'RockTemp25',
                  data: [
                     {% for item in rt25y %}
                        {{ item if item is not none }},
                     {% endfor %}
                  ],
                  backgroundColor: '#add8e6',
                  borderColor: ['blue'],
                  borderWidth: 1,
                  spanGaps: true,
                  yAxisID: 'rt25Y'
               },
               {
                  label: 'RockTemp50',
                  data: [
                     {% for item in rt50y %}
                        {{ item if item is not none }},
                     {% endfor %}
                  ],
                  backgroundColor: '#FFCCCB',
                  borderColor: ['red'],
                  borderWidth: 1,
                  spanGaps: true,
                  yAxisID: 'rt50Y'
               }
            ],
         },
         options: {
            plugins: {
               title: {
                  text: 'chart title',
                  display: true
               }
            },
            scales: {
               x: {
                  type: 'time',
                  time: {
                     tooltipFormat: 'dd.MM.yy HH:mm',
                     displayFormats: {
                        day: 'dd.MM yy',
                        minute: 'dd.MMM yy HH:mm',
                        hour: 'dd.MMM yy hha'
                     }
                  },
                  title: {
                     display: true,
                     text: 'Date'
                  }
               },
               /*y: {
                  display: false,
                  type: 'linear'
               }*/
               cdY: {
                  position: 'left',
                  display: false
               },
               rt25Y: {
                  position: 'left',
                  display: false
               },
               rt50Y: {
                  position: 'left',
                  display: false
               }
            }
         }
      });
   </script>
{% endblock %}